<h1>Detalles de la Tarea</h1>

@if (tarea) {
  @if (modoEdicion) {
    <!-- Vista edición: /tasks/:id/edit -->
    <div>
      <form (ngSubmit)="guardarTarea()">
        <div>
          <label for="title">Título:</label>
          <input type="text" id="title" [(ngModel)]="tarea.title" name="title" required />
        </div>

        <div>
          <label for="userId">Usuario:</label>
          <input type="number" id="userId" [(ngModel)]="tarea.userId" name="userId"
            (ngModelChange)="nombreUsuario = userService.getNombreUsuario(tarea.userId)" />
          <p>{{ nombreUsuario }}</p>
        </div>

        <div>
          <label for="completed">Completada:</label>
          <input type="checkbox" id="completed" [(ngModel)]="tarea.completed" name="completed" />
        </div>

        <button type="submit">Guardar cambios</button>
        <button type="button" (click)="volver()">Volver sin guardar</button>
      </form>
    </div>
  } @else {
    <!-- Vista detalle: /tasks/:id -->
    <div>
      <p><strong>Título:</strong> {{ tarea.title | uppercase }}</p>
      <p><strong>Usuario:</strong> {{ nombreUsuario }}</p>
      <p><strong>Completada:</strong> {{ tarea.completed | taskStatus }}</p>

      <button (click)="irAEditar()">Editar</button>
      <button (click)="volver()">Volver</button>
    </div>
  }
} @else {
  <p>No se ha podido mostrar el detalle de la tarea.</p>
}